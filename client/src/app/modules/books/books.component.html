<mat-progress-bar *ngIf="isLoading" mode="indeterminate" class=""></mat-progress-bar>  
<div class="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-8 px-4">
    <div class="max-w-6xl mx-auto space-y-6">
      <!-- Navigation Tabs -->
      <mat-tab-group class="mb-6" [selectedIndex]="selectedTabIndex" (selectedTabChange)="onTabChange($event)">
        <mat-tab label="Active Books"></mat-tab>
        <mat-tab label="Archived Books"></mat-tab>
      </mat-tab-group>

      <!-- Header -->
      <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-8">
        <div>
          <h1 class="text-4xl font-bold text-slate-800 !mb-0 !leading-none">Books Management</h1>
          <p class="pl-2 text-slate-600 text-medium !mt-0.5">Manage your book collection</p>
        </div>
    
        <mat-form-field class="w-full sm:w-80 bg-white rounded-lg">
          <mat-label>Search books</mat-label>
          <input
            matInput
            placeholder="Type to search..."
            [formControl]="searchControl"
          />
        </mat-form-field>
      </div>
    
      <!-- Form Card -->
      <mat-card class="bg-white rounded-xl shadow-lg transition-all duration-300 hover:shadow-2xl animate-fadeIn">
        <mat-card-header class="mb-5 pb-4">
          <mat-card-title class="text-2xl font-semibold text-slate-800">
            <div class="flex items-center gap-4">
              <div>
                <mat-icon 
                  class="text-[28px] w-7 h-7 flex items-center justify-center"
                  [ngClass]="isEditing ? 'text-blue-600' : 'text-green-600'"
                >{{ isEditing ? 'edit' : 'add' }}</mat-icon>
              </div>
              <div>
                <span class="leading-none">{{ isEditing ? 'Edit Book' : 'Add New Book' }}</span>
              </div>
            </div>
          </mat-card-title>
        </mat-card-header>
    
        <mat-card-content>
          <form
            [formGroup]="form"
            (ngSubmit)="submit()"
            class="grid grid-cols-1 md:grid-cols-3 gap-6"
          >
            <!-- ID -->
            <mat-form-field class="w-full mb-2">
              <mat-label>ID</mat-label>
              <input matInput formControlName="id" />
              <mat-error *ngIf="idError">{{ idError }}</mat-error>
            </mat-form-field>
    
            <!-- Name -->
            <mat-form-field  class="md:col-span-2 w-full mb-2">
              <mat-label>Book Name</mat-label>
              <input matInput formControlName="name" placeholder="Enter book name" />
              <mat-error *ngIf="nameError">{{ nameError }}</mat-error>
            </mat-form-field>
    
            <!-- Actions -->
            <div class="md:col-span-3 flex gap-3 mt-2">
              <perc-button
                [label]="isEditing ? 'Update Book' : 'Create Book'"
                [icon]="isEditing ? 'save' : 'add'"
                color="primary"
                type="submit"
                [disabled]="isSubmitDisabled || isLoading"
                class="min-w-[140px] h-[42px] font-medium tracking-wide transition-all duration-200 hover:-translate-y-0.5"
              ></perc-button>
    
              <perc-button
                *ngIf="isEditing"
                label="Cancel"
                icon="close"
                type="button"
                (clicked)="clearSelection()"
                [disabled]="isLoading"
                class="min-w-[100px] h-[42px] transition-all duration-200 hover:-translate-y-0.5"
              ></perc-button>
            </div>
          </form>
        </mat-card-content>
      </mat-card>
    
      <!-- Table Card -->
      <mat-card class="bg-white rounded-xl shadow-lg transition-all duration-300 hover:shadow-2xl animate-fadeIn">
        <mat-card-header class="mb-5 pb-4">
          <mat-card-title class="text-xl font-semibold text-slate-800">
            <div class="flex items-center gap-4">
              <div>
                <mat-icon class="text-[24px] w-6 h-6 flex items-center text-indigo-600 justify-center">menu_book</mat-icon>
              </div>
              <div>
                <span class="leading-none">Book Collection</span>
              </div>
            </div>
          </mat-card-title>
        </mat-card-header>
        
        <mat-card-content class="p-0">
          <perc-data-table
            [data]="(filteredBooks$ | async) ?? []"
            [columns]="tableColumns"
            [config]="tableConfig"
            [selectedItem]="selectedBook"
            [totalDataCount]="(books$ | async)?.length ?? 0"
            [isLoading]="isLoading"
            (edit)="onEditBook($event)"
            (delete)="onDeleteBook($event)"
          ></perc-data-table>
        </mat-card-content>
      </mat-card>
    
      <perc-alert
        type="warning"
        message="Data is stored <strong>in memory</strong>. Reloading the page will reset the list."
        class="mt-6"
      ></perc-alert>
    </div>
  </div>
  